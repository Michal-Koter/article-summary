<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Summary article</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>

    <h1>Summary of article</h1>
    <div class="input">
        <label for="inputText">Enter Article:</label>
        <textarea id="inputText" class="article" placeholder="Enter text..."></textarea>
        <button onclick="sendHttpRequest()">Submit</button>
    </div>

    <div id="loadingMessage" class="wait">
        Please wait, the summary is in progress
    </div>

    <h2>Summary:</h2>
    <div class="row">
        <div>
            <label for="bertText">slauw87/bart_summarisation:</label>
            <textarea id="bertText" class="summery" readonly></textarea>
        </div>
        <div>
            <label for="destilbertText">sshleifer/distilbart-cnn-12-6:</label>
            <textarea id="destilbertText" class="summery" readonly></textarea>
        </div>
        <div>
            <label for="t5_smallText">Falconsai/text_summarization:</label>
            <textarea id="t5_smallText" class="summery" readonly></textarea>
        </div>
    </div>


    <script>
        async function sendHttpRequest() {
            document.getElementById('loadingMessage').style.display = 'block';
            document.body.style.overflow = 'hidden';

            var data = {
                "text": document.getElementById('inputText').value
            }

            const requestOptions = {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            };

            await fetch("http://127.0.0.1:8000/summarize/bert", requestOptions)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(responseData => {
                    document.getElementById('bertText').value = responseData;
                })
                .catch(error => {
                    document.getElementById('bertText').value = `Fetch error: ${error}`;
                })

            await fetch("http://127.0.0.1:8000/summarize/destilbert", requestOptions)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(responseData => {
                    document.getElementById('destilbertText').value = responseData;
                })
                .catch(error => {
                    document.getElementById('destilbertText').value = `Fetch error: ${error}`;
                })

            await fetch("http://127.0.0.1:8000/summarize/t5", requestOptions)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(responseData => {
                    document.getElementById('t5_smallText').value = responseData;
                })
                .catch(error => {
                    document.getElementById('t5_smallText').value = `Fetch error: ${error}`;
                })
            document.getElementById('loadingMessage').style.display = 'none';
        }
    </script>

</body>
</html>
